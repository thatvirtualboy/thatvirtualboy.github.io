I"V<p>In building Premium features into my SwiftUI app available with a subscription, one use case that I considered is, ‚ÄúWhat if someone cancels their subscription, or their subscription lapses?‚Äù</p>

<p>Sure they wouldn‚Äôt be able to take advantage of using a premium feature from that point on (assuming you‚Äôve already built paywalls into your app), but what about customization settings that the user already applied? Things like custom theming options? In this scenario, I‚Äôd prefer for <em>some</em> premium content to become unavailable. It would be a poor design to not check for the <em>Pro</em> status and then handle premium content accordingly. I say ‚Äúsome‚Äù premium content because you really must consider the end-user‚Äôs experience here. Perhaps not every feature should be locked back up. Here‚Äôs an example:</p>

<p>In my app <a href="https://artbox.app">Artbox</a>, there are several premium features, two of which are custom icons, and adding multiple photos per project. I feel it‚Äôs best to attack these two features differently:</p>

<h3 id="2-examples">2 Examples</h3>

<p><strong>Custom Icons</strong> - I‚Äôm treating this feature as reserved only for current, active subscriptions. So in the scenario where a user‚Äôs subscription lapses, the app icon will be checked and if the <em>Pro</em> flag is false, then the icon will be reverted to default.</p>

<p><strong>Multiple Photos</strong> - This feature similarly will be reverted, however projects that were created during the active subscription that contain multiple photos will still present multiple photos - I don‚Äôt believe that removing access to those photos is the best user experience. What the user can expect after lapsing a subscription is that new projects will simply be limited to 1 photo. Then when then reactive their subscription, they can later go add additional photos to the project if needed.</p>

<h3 id="a-simple-check">A Simple Check</h3>
<p>One way to achieve this is by using an <code class="highlighter-rouge">.onAppear</code> modifier to a view and perform an action based on the pro flag:</p>

<script src="https://gist.github.com/thatvirtualboy/24bfd63fcbdfac756a06e54ccbaf9171.js"></script>

<p>What‚Äôs happening here is that on appearance of the setting where a user might change their icon, we check for my global <code class="highlighter-rouge">isPro</code> flag and if false, it will set the current icon to the Default option. I have some other values I set here that are used for other views and telemetry data, but as you can see it‚Äôs very simple to perform the check.</p>

<p>Here‚Äôs another example of checking if the profile gradient is one of the free options, or a premium option:</p>

<script src="https://gist.github.com/thatvirtualboy/cd713a7f9e5848329cd9de76446f40db.js"></script>

<p>In my app, the profile color gradients are represented by an <code class="highlighter-rouge">Int</code> where 1 through 6 are included in the free download. Whereas gradients 7 though 15 are premium. Here we do a check and say that if <code class="highlighter-rouge">isPro</code> is false AND the profile is using one of the premium gradients (as represented by the stored <code class="highlighter-rouge">Int</code> value between 7 and 15) then set that value to the default free gradient by applying the <code class="highlighter-rouge">Int</code> value of 1.</p>

<h3 id="in-summary">In Summary</h3>
<p>There are many ways you could achieve similar results of having your SwiftUI app adjust its experience based on a user‚Äôs subscription status. I hope that this helped you understand one of those options. Good luck and happy coding!</p>
:ET