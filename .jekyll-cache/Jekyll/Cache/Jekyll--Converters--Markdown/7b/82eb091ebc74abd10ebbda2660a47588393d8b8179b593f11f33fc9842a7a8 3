I"<p>One nifty feature of Horizon Workspace is the ability to share files and folders with external users. An “external user” could mean one of two things:<br />&lt;ol&gt;<br />	&lt;li&gt;A directory server user not synced to Horizon Workspace&lt;/li&gt;<br />	&lt;li&gt;Someone outside of the enterprise&lt;/li&gt;<br />&lt;/ol&gt;<br />&lt;div&gt;An invited user is then created as a <i>virtual user</i> in the Workspace instance. You can find more information about virtual users in the Horizon Workspace Administrator’s Guide under User and Group Types: <a href="http://hrzn.ws/1nqI0ZS">http://hrzn.ws/1nqI0ZS</a>&lt;/div&gt;<br />&lt;div&gt;&lt;/div&gt;<br />&lt;div&gt;When a virtual user is created, they are assigned to a hidden Class of Service (COS) called <b>defaultExternal</b>. This class of service comes with its own parameters, notably, all virtual users are defaulted to a file upload size of <b>2GB</b>. You may notice the following error when a virtual user tries to upload a file larger than 2GB:&lt;/div&gt;<br />&lt;div&gt;&lt;/div&gt;<br />&lt;blockquote class="tr_bq"&gt;<span style="background-color:white;color:#434343;font-family:'Courier New';"> exceeds single file maximum upload size 2147483648 bytes</span>&lt;/blockquote&gt;<br />&lt;div&gt;&lt;/div&gt;<br />&lt;div&gt;Additionally, the virtual user will share the quota of the internal user that shared the file with them. So if the <i>inviter</i> has an unlimited quota, files the <i>invitee</i> uploads won’t have a negative impact. Conversely, if the <i>inviter</i> has a 10GB limit, any file the <i>invitee</i> uploads will go toward that internal user’s 10GB quota.&lt;/div&gt;<br />&lt;div&gt;&lt;/div&gt;<br />&lt;blockquote class="tr_bq"&gt;So how can we increase the virtual user’s file upload size limit?&lt;/blockquote&gt;<br />Though the defaultExternal COS is hidden in the Administration Console, you can still configure its attributes via the data-va command line.<br />&lt;div style="background-color:white;"&gt;<span style="font-family:inherit;"> </span>&lt;/div&gt;<br /><span style="background-color:white;"><span style="font-family:inherit;">To change the upload file size limit for virtual users:</span></span><br />&lt;div style="background-color:white;"&gt;<br />&lt;ol style="margin-top:5px;"&gt;<br />	&lt;li&gt;<span style="font-family:inherit;">Login to the data-va as <b>root</b></span>&lt;/li&gt;<br />	&lt;li&gt;<span style="font-family:inherit;">Change to the </span><b style="font-family:inherit;">zimbra</b><span style="font-family:inherit;"> user:</span><br /><br /><span style="font-family:Courier New, Courier, monospace;">sudo su - zimbra</span>&lt;/li&gt;<br />	&lt;li&gt;<span style="font-family:inherit;">Switch to the virtual user tenant and modify the upload attribute to the desired file size limit, in bytes:</span><br /><span style="font-family:Courier New, Courier, monospace;"><span style="font-family:Courier New, Courier, monospace;">$ zmprov<br />prov&gt; st <strong>virtual</strong><br />prov&gt; mc defaultExternal hzndataFileUploadMaxSize <i>filesize-in-bytes</i><br />prov&gt; mc defaultExternal hzndataFileUploadMaxSizePerFile <i>filesize-in-bytes</i><br />prov&gt; quit<br /><br /></span></span><br />&lt;table class="tr-caption-container" style="margin-left:auto;margin-right:auto;text-align:center;" cellspacing="0" cellpadding="0" align="center"&gt;<br />&lt;tbody&gt;<br />&lt;tr&gt;<br />&lt;td style="text-align:center;"&gt;<a style="margin-left:auto;margin-right:auto;" href="https://thatvirtualboy.files.wordpress.com/2014/05/58bcd-virtual.png"><img src="https://thatvirtualboy.files.wordpress.com/2014/05/58bcd-virtual.png" alt="" width="400" height="67" border="0" /></a>&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;tr&gt;<br />&lt;td class="tr-caption" style="text-align:center;"&gt;Increasing virtual user file upload limit to 3GB&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;/tbody&gt;<br />&lt;/table&gt;<br />&lt;/li&gt;<br />	&lt;li&gt;<span style="font-family:inherit;">Restart the service</span><br /><br /><span style="font-family:Courier New, Courier, monospace;">zmcontrol restart</span>&lt;/li&gt;<br />&lt;/ol&gt;<br />&lt;/div&gt;<br />&lt;div style="background-color:white;"&gt;<span style="font-family:inherit;"><b>Note</b>: to clear the Tenant specifier back to default, use the unsetTenant command:</span>&lt;/div&gt;<br />&lt;blockquote style="background-color:white;border:none;margin:0 0 0 40px;padding:0;"&gt;<span style="font-family:Courier New, Courier, monospace;">$ zmprov</span>&lt;/blockquote&gt;<br />&lt;blockquote style="background-color:white;border:none;margin:0 0 0 40px;padding:0;"&gt;<span style="font-family:Courier New, Courier, monospace;">prov&gt; ut</span>&lt;/blockquote&gt;<br />To view all COS, you can use ‘gac.’ Notice my example below doesn’t show defaultExternal because I do not have any virtual users:<br />&lt;div class="separator" style="clear:both;text-align:center;"&gt;<a style="margin-left:1em;margin-right:1em;" href="https://thatvirtualboy.files.wordpress.com/2014/05/6f49c-gac.png"><img src="https://thatvirtualboy.files.wordpress.com/2014/05/6f49c-gac.png" alt="" width="400" height="132" border="0" /></a>&lt;/div&gt;<br />Additionally you can run “<span style="font-family:Courier New, Courier, monospace;">zmprov gac -v”</span> which will show all the configured attributes for each COS. The process outlined above can be used to edit any COS manually. Keep in mind a COS you’ve created in the Administrator Console GUI will be in the default tentant, not the <strong>virtual</strong> tenant.<br /><br />Happy modding!</p>
:ET