---
layout: post
title: Upgrading Seafile Server from version 6 to version 7
date: '2019-08-21T13:30:00.001-07:00'
author: thatvirtualboy
excerpt: "In this post I'll cover the process of upgrading Seafile Server from 6.3.4 to 7.0.4. You'll be surprised how simple it actually is!"
tags:
- seafile
- linux
- web server
- upgrade
modified_time: '2019-08-21T13:30:56.384-07:00'
thumbnail: https://1.bp.blogspot.com/-XUKyjQCCedE/XV2hVt4Ca8I/AAAAAAAA1ds/I0-lDzmHZeoAfnzSme6zFeV7O2p2-utfACLcBGAs/s72-c/iu-6.png
blogger_id: tag:blogger.com,1999:blog-733606464149134140.post-2762552689065993071
blogger_orig_url: https://www.thatvirtualboy.com/2019/08/upgrading-seafile-server-from-version-6.html
redirect_from: /2019/08/upgrading-seafile-server-from-version-6.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-XUKyjQCCedE/XV2hVt4Ca8I/AAAAAAAA1ds/I0-lDzmHZeoAfnzSme6zFeV7O2p2-utfACLcBGAs/s1600/iu-6.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="853" data-original-width="1279" height="425" src="https://1.bp.blogspot.com/-XUKyjQCCedE/XV2hVt4Ca8I/AAAAAAAA1ds/I0-lDzmHZeoAfnzSme6zFeV7O2p2-utfACLcBGAs/s640/iu-6.png" width="640" /></a></div><div><br /></div>In this post I'll cover the process of upgrading Seafile Server from 6.3.4 to 7.0.4. I've been running Seafile Server in an Ubuntu VM on my Linux Server for <a href="https://www.thatvirtualboy.com/2018/01/goodbye-owncloud-hello-seafile.html" target="_blank">about a year and a half</a>. Along with using <b>Let's Encrypt</b>'s <i>Certbot</i>, it's been an incredibly stable and virtually 'hands off' service.&nbsp;<div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-wyKzlf7WbVc/XV2hZkmu6DI/AAAAAAAA1eo/TLqhAgXwIbwCdRoUnyClf7Heki6AO6lkACEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.21.40%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="250" data-original-width="381" height="261" src="https://1.bp.blogspot.com/-wyKzlf7WbVc/XV2hZkmu6DI/AAAAAAAA1eo/TLqhAgXwIbwCdRoUnyClf7Heki6AO6lkACEwYBhgL/s400/Screen%2BShot%2B2019-08-21%2Bat%2B10.21.40%2BAM.png" width="400" /></a></div><div><br /><h4>Pre Upgrade</h4><div><br /></div><div><ol><li><b>Backup current system</b>. As I run Seafile in a VMware Workstation (for Linux) VM, it's easy to create a quick snapshot of the current system and configuration that I can revert to in the case of any unforeseen issues. Additionally, I run <i><a href="https://www.tecrobust.com/?p=477" target="_blank">Timeshift</a></i> with daily/weekly/monthly rollups of my entire server. Can't ever be too careful!</li><li><b>Download the new Seafile bits</b>. Seafile Server is a quick download from their <a href="https://www.seafile.com/en/download/" target="_blank">download page</a>, and is simple to run a <span style="font-family: Courier New, Courier, monospace;">wget</span> on the download to get it to your server.&nbsp;</li><li><b>Make sure the current server is functional</b>. Before you perform any upgrade of any service/application, it's best practice to ensure the current iteration is up and running and functional. This is a practice any IT professional should follow regardless of your employer/application/service in question. Failing to do so can bring unwanted behaviors to your updated instance, or even cause the upgrade to fail altogether.</li><li><b>Review the Release Notes</b>. Once again, a best practice anyone in IT should follow before jumping into an upgrade is reviewing the Release Notes of the target version. Release Notes are known to include critical information not only related to new features, but often around the upgrade process itself.</li></ol><h4>Upgrade</h4></div><div><br /></div><div><ol><li>After reviewing the <a href="http://bit.ly/2KMUOOQ" target="_blank">release notes</a> and downloading the 7.0.4 bits to your server, <i>untar</i> the file using the command <span style="font-family: Courier New, Courier, monospace;">tar -xzvf seafile-server_7.0.4_x86-64.tar.gz </span><span style="font-family: inherit;">and ensure the resulting folder is in the same directory as your current seafile installation<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-hggJsjtGdCE/XV2haJLv-8I/AAAAAAAA1eo/ncO1c_SwlhETUQGdep-7DT24CWsbanNQwCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.27.53%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="61" data-original-width="887" src="https://1.bp.blogspot.com/-hggJsjtGdCE/XV2haJLv-8I/AAAAAAAA1eo/ncO1c_SwlhETUQGdep-7DT24CWsbanNQwCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.27.53%2BAM.png" /></a></div></span></li><li><span style="font-family: inherit;">The next step is to stop your seafile services (seahub and seafile) by running </span><span style="font-family: Courier New, Courier, monospace;">./seahub.sh stop &amp;&amp; seafile.sh stop</span></li><li><span style="font-family: inherit;">Once the services are stopped, go into the new 7.0.4 directory and find the upgrade scripts under the <b>upgrade</b> folder. Starting with the script of your current server (in my case, 6.3.4 would correlate to upgrade_6.3_7.0.sh), run each script<div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-ltBdxODF5i4/XV2hadS3uhI/AAAAAAAA1eg/45JKoEMDlgcqMZgZlsDAEN7xvZ1Mc2tsgCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.29.16%2BAM.png" imageanchor="1" style="font-family: inherit; margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="299" data-original-width="886" height="214" src="https://1.bp.blogspot.com/-ltBdxODF5i4/XV2hadS3uhI/AAAAAAAA1eg/45JKoEMDlgcqMZgZlsDAEN7xvZ1Mc2tsgCEwYBhgL/s640/Screen%2BShot%2B2019-08-21%2Bat%2B10.29.16%2BAM.png" width="640" /></a></div></span></li><li><span style="font-family: inherit;">Run the upgrade script and press ENTER<div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-wUqFU7ZOk5g/XV2hbSoLeOI/AAAAAAAA1es/TbJIqJP5bDMv6VVpkXz1tsSkcHEvUXingCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.30.34%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="119" data-original-width="535" height="142" src="https://1.bp.blogspot.com/-wUqFU7ZOk5g/XV2hbSoLeOI/AAAAAAAA1es/TbJIqJP5bDMv6VVpkXz1tsSkcHEvUXingCEwYBhgL/s640/Screen%2BShot%2B2019-08-21%2Bat%2B10.30.34%2BAM.png" width="640" /></a></div></span></li><li>You may find some [info] and [warning] messages, but as long as there are no [error] messages, you'll look for "<i>Upgraded your seafile server successfully</i>"<div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-I4HY7_vJFY4/XV2hb653wNI/AAAAAAAA1ek/oL7WxN2JW2kk5Pc0ZIYwXuvyUePu-2QHQCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.30.53%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="495" data-original-width="882" height="358" src="https://1.bp.blogspot.com/-I4HY7_vJFY4/XV2hb653wNI/AAAAAAAA1ek/oL7WxN2JW2kk5Pc0ZIYwXuvyUePu-2QHQCEwYBhgL/s640/Screen%2BShot%2B2019-08-21%2Bat%2B10.30.53%2BAM.png" width="640" /></a></div></li><li>Ensure your seafile and seahub services start successfully, then verify your version on the server in the About section.&nbsp;<div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-aCX83h_azUE/XV2hcaw1XaI/AAAAAAAA1eo/2O6tqVpfsugH2OUwaFM2H6HCqz7iv37mQCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.31.28%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="276" data-original-width="719" height="244" src="https://1.bp.blogspot.com/-aCX83h_azUE/XV2hcaw1XaI/AAAAAAAA1eo/2O6tqVpfsugH2OUwaFM2H6HCqz7iv37mQCEwYBhgL/s640/Screen%2BShot%2B2019-08-21%2Bat%2B10.31.28%2BAM.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-v6JWJrlEMkU/XV2hc5sdz4I/AAAAAAAA1es/uRjNfXl8Ucoau9eqddxFvHUZ7oeD32fagCEwYBhgL/s1600/Screen%2BShot%2B2019-08-21%2Bat%2B10.31.57%2BAM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="207" data-original-width="512" height="161" src="https://1.bp.blogspot.com/-v6JWJrlEMkU/XV2hc5sdz4I/AAAAAAAA1es/uRjNfXl8Ucoau9eqddxFvHUZ7oeD32fagCEwYBhgL/s400/Screen%2BShot%2B2019-08-21%2Bat%2B10.31.57%2BAM.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">And congrats you're done!&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">One thing I tried testing that doesn't seem to be fully working yet is editing the new Published Library's <b>.md</b> file. I get a spinning circle as if it's thinking or loading something. In my case, it just spins indefinitely:</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-CQVpGUMmnKI/XV2hdzKpQjI/AAAAAAAA1e0/kqjpAzYmGvcKGYfFUdq3dopCcT_UqAQYgCEwYBhgL/s1600/seafile_public_lib_md_edit.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="248" data-original-width="450" height="176" src="https://1.bp.blogspot.com/-CQVpGUMmnKI/XV2hdzKpQjI/AAAAAAAA1e0/kqjpAzYmGvcKGYfFUdq3dopCcT_UqAQYgCEwYBhgL/s320/seafile_public_lib_md_edit.gif" width="320" /></a></div><div class="separator" style="clear: both; text-align: left;">At any rate, your server should now be upgraded! Let me know how your upgrade went in the comments. Thanks for reading!</div><div class="separator" style="clear: both; text-align: left;"><br /></div></li></ol></div></div></div>
