---
layout: post
title: Goodbye Owncloud, Hello Seafile
date: '2018-01-05T13:44:00.000-08:00'
author: Ryan Klumph
excerpt: "After years of hosting OwnCloud as my home file server with 'Cloud Access' I've taken the plunge and migrated to a new platform which I'm really excited about: Seafile!"
categories: [seafile, bacon, owncloud]
modified_time: '2018-01-05T13:56:26.835-08:00'
thumbnail: https://3.bp.blogspot.com/-OexTHROkE6M/Wk_u6qFLvHI/AAAAAAAAv1A/YbUdihwOn4AGMbcvR-vAkxVpb__l2oKsACLcBGAs/s72-c/owncloud.png
blogger_id: tag:blogger.com,1999:blog-733606464149134140.post-8471238527388241372
blogger_orig_url: https://www.thatvirtualboy.com/2018/01/goodbye-owncloud-hello-seafile.html
redirect_from: /2018/01/goodbye-owncloud-hello-seafile.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-OexTHROkE6M/Wk_u6qFLvHI/AAAAAAAAv1A/YbUdihwOn4AGMbcvR-vAkxVpb__l2oKsACLcBGAs/s1600/owncloud.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" data-original-height="400" data-original-width="400" height="200" src="https://3.bp.blogspot.com/-OexTHROkE6M/Wk_u6qFLvHI/AAAAAAAAv1A/YbUdihwOn4AGMbcvR-vAkxVpb__l2oKsACLcBGAs/s200/owncloud.png" width="200" /></a></div>I had been an <a href="https://owncloud.org/" target="_blank">OwnCloud</a> user for several years now. The En0ch team's <a href="https://www.techandme.se/pre-configured-owncloud-installaton/" target="_blank">OwnCloud VM</a> made it easy to deploy and get setup in no time. My configuration was perhaps somewhat unique with the server being a hosted VM and the files being stored on a NTFS drive shared through a CIFS Mount to the VM. Performance was less than stellar, but it worked! For my home needs anyway.<br /><br />Recently we had a power outage in my neighborhood (a new neighborhood, so this was certainly not the first) and every time this happened, OwnCloud would crash hard. I was always surprised at how much work it took for me to get the service back up and running. I was on the latest stable 9.x build for some time (I think 10.0.4 is the latest at the time of this writing). For a while I had been thinking it was time to either wipe it all and start new, or find a new solution. After this most recent power outage, I figured it was time to start fresh AND look for a new solution.<br /><br /><a href="https://1.bp.blogspot.com/-DkXsCfzGo0E/Wk_vJ49mFvI/AAAAAAAAv1E/IpWgQ0nNAD4D9_Cm-XxEcYku0cgIpeSMACLcBGAs/s1600/Screen%2BShot%2B2018-01-05%2Bat%2B2.33.07%2BPM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" data-original-height="400" data-original-width="400" height="200" src="https://1.bp.blogspot.com/-DkXsCfzGo0E/Wk_vJ49mFvI/AAAAAAAAv1E/IpWgQ0nNAD4D9_Cm-XxEcYku0cgIpeSMACLcBGAs/s200/Screen%2BShot%2B2018-01-05%2Bat%2B2.33.07%2BPM.png" style="cursor: move;" width="200" /></a>I soon discovered <a href="https://www.seafile.com/en/home/" target="_blank">Seafile</a> and thought the initial configuration looked simple to setup. It's friendly integration with <a href="https://letsencrypt.org/" target="_blank">Let's Encrypt</a> and modern UI were also intriguing.<br /><br />After 30 minutes I had seafile up and running on my LAN. It was extremely simple following <a href="https://manual.seafile.com/deploy/using_mysql.html" target="_blank">their documentation</a>. It wasn't until I tried to enable HTTPS over WAN that I <a href="https://forum.seafile.com/t/help-with-nginx-https-redirect/5006/4" target="_blank">ran into some challenges</a>, but once that was taken care of, I've been able to explore the product more.<br /><br />Over my own experience with OwnCloud, Seafile is significantly faster. From syncing, to downloading, to streaming media - the overall experience is quite pleasant. It even works well for sharing public download and upload links, which was one of the most useful features of a self-hosted cloud file share.<br /><br />Here are some of the tricks to my setup I had to configure:<br /><br /><h4>Environment</h4><br /><ul><li>Seafile 6.2.3 on Ubuntu Server 16.04 VM in VMware Workstation (hosted on Windows 10)</li><li>Storage is 2TB NTFS WD Passport configured as a Shared Folder to the Guest OS via Workstation</li><li>MySQL DB since storage is on NTFS (per user docs)</li><li>Let's Encrypt SSL Cert</li><li>NGINX reverse proxy</li></ul><br /><br />The first challenge was making it so I didn't have to run the <i>seafile.sh</i> and <i>seahub.sh</i> services with sudo. Because I'm using shared folders in Workstation, I wasn't the 'owner' of the data folder that get's configured and the services would fail to start unless ran with <i>sudo</i>. I found that if I opened<br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/init.d/vmware-tools</span><br />and used my own GID and UID, it would mount the HGFS share properly and I could start the services without sudo<br /><br /><pre><code># Mount all hgfs filesystems<br />vmware_mount_vmhgfs() {<br />  if [ "`is_vmhgfs_mounted`" = "no" ]; then<br />    if [ "`vmware_vmhgfs_use_fuse`" = "yes" ]; then<br />      mkdir -p $vmhgfs_mnt<br />      vmware_exec_selinux "$vmdb_answer_BINDIR/vmhgfs-fuse \<br />         -o subtype=vmhgfs-fuse,allow_other,uid=1000,gid=1000 $vmhgfs_mnt"<br />    else<br />      vmware_exec_selinux "mount -t vmhgfs .host:/ $vmhgfs_mnt -o uid=1000,gid=1000"<br />    fi<br />  fi<br />}</code></pre><br />The second biggest challenge was getting my nginx configuration right. I found that when I would enter my DDNS address for the server, I would be directed to my router's login - I wasn't getting passed through to the server itself. You can read more about the symptoms in the <a href="https://forum.seafile.com/t/help-with-nginx-https-redirect/5006/4" target="_blank">Seafile Forums</a>. Long story short, I was missing some information shared in the <i>Sample configuration file</i> <a href="https://manual.seafile.com/deploy/https_with_nginx.html" target="_blank">from the docs</a>. Read those buggers carefully!<br /><br />Whatever your self-hosted cloud storage provider is (OwnCloud, Seafile, NextCloud, etc), we can at least all agree that we're glad to be off of the big brother alternatives!
